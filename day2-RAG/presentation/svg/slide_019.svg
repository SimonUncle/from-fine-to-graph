<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080" width="1920" height="1080">
  <rect width="1920" height="1080" fill="#FFFFFF"/>

  <rect x="80" y="60" width="380" height="50" rx="25" fill="#4ECDC4" opacity="0.2"/>
  <text x="270" y="92" font-family="system-ui, sans-serif" font-size="22" font-weight="600" fill="#4ECDC4" text-anchor="middle">Section 4: Query Refinement</text>

  <text x="960" y="160" font-family="system-ui, sans-serif" font-size="64" font-weight="bold" fill="#2C3E50" text-anchor="middle">Multi-Query Retrieval</text>
  <text x="960" y="220" font-family="system-ui, sans-serif" font-size="28" fill="#7F8C8D" text-anchor="middle">"1개 질문을 3개로 분해해서 검색"</text>

  <g transform="translate(960, 240)"><circle cx="-60" cy="0" r="6" fill="#FF6B6B"/><circle cx="-30" cy="0" r="6" fill="#4ECDC4"/><circle cx="0" cy="0" r="6" fill="#45B7D1"/><circle cx="30" cy="0" r="6" fill="#96CEB4"/><circle cx="60" cy="0" r="6" fill="#FFEAA7"/></g>

  <!-- Flowchart -->
  <g transform="translate(200, 300)">
    <!-- Original Question -->
    <rect x="0" y="180" width="400" height="100" rx="20" fill="#FFB3BA" opacity="0.3" stroke="#FF6B6B" stroke-width="3"/>
    <text x="200" y="220" font-family="system-ui, sans-serif" font-size="24" font-weight="bold" fill="#2C3E50" text-anchor="middle">원본 질문</text>
    <text x="200" y="255" font-family="system-ui, sans-serif" font-size="18" fill="#7F8C8D" text-anchor="middle">"도박 빚을 갚아야 하나요?"</text>

    <path d="M 400 230 L 520 230" stroke="#95A5A6" stroke-width="4" fill="none" marker-end="url(#arrow)"/>

    <!-- LLM Decomposer -->
    <rect x="520" y="150" width="280" height="160" rx="20" fill="#BAFFC9" opacity="0.3" stroke="#4ECDC4" stroke-width="3"/>
    <text x="660" y="190" font-size="45" text-anchor="middle">🤖</text>
    <text x="660" y="240" font-family="system-ui, sans-serif" font-size="24" font-weight="bold" fill="#2C3E50" text-anchor="middle">LLM</text>
    <text x="660" y="275" font-family="system-ui, sans-serif" font-size="18" fill="#7F8C8D" text-anchor="middle">질문 분해기</text>
  </g>

  <!-- Decomposed Questions -->
  <g transform="translate(1040, 300)">
    <path d="M 0 230 L 80 80" stroke="#95A5A6" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
    <path d="M 0 230 L 80 230" stroke="#95A5A6" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
    <path d="M 0 230 L 80 380" stroke="#95A5A6" stroke-width="3" fill="none" marker-end="url(#arrow)"/>

    <!-- Q1 -->
    <rect x="80" y="30" width="560" height="100" rx="15" fill="#BAE1FF" opacity="0.3" stroke="#45B7D1" stroke-width="2"/>
    <text x="360" y="70" font-family="system-ui, sans-serif" font-size="20" font-weight="600" fill="#2C3E50" text-anchor="middle">세부 질문 1</text>
    <text x="360" y="100" font-family="system-ui, sans-serif" font-size="18" fill="#34495E" text-anchor="middle">"도박 채무의 법적 효력은 무엇인가요?"</text>

    <!-- Q2 -->
    <rect x="80" y="180" width="560" height="100" rx="15" fill="#BAE1FF" opacity="0.3" stroke="#45B7D1" stroke-width="2"/>
    <text x="360" y="220" font-family="system-ui, sans-serif" font-size="20" font-weight="600" fill="#2C3E50" text-anchor="middle">세부 질문 2</text>
    <text x="360" y="250" font-family="system-ui, sans-serif" font-size="18" fill="#34495E" text-anchor="middle">"민법 제103조 공서양속 위반이란?"</text>

    <!-- Q3 -->
    <rect x="80" y="330" width="560" height="100" rx="15" fill="#BAE1FF" opacity="0.3" stroke="#45B7D1" stroke-width="2"/>
    <text x="360" y="370" font-family="system-ui, sans-serif" font-size="20" font-weight="600" fill="#2C3E50" text-anchor="middle">세부 질문 3</text>
    <text x="360" y="400" font-family="system-ui, sans-serif" font-size="18" fill="#34495E" text-anchor="middle">"불법 채권 회수 시 대응 방법은?"</text>
  </g>

  <!-- Search & Merge -->
  <g transform="translate(300, 680)">
    <text x="660" y="0" font-family="system-ui, sans-serif" font-size="28" font-weight="bold" fill="#2C3E50" text-anchor="middle">각 질문으로 독립 검색 후 결과 병합</text>

    <!-- Results -->
    <rect x="0" y="30" width="1320" height="180" rx="20" fill="#E0BBE4" opacity="0.2" stroke="#9B59B6" stroke-width="3"/>
    <text x="660" y="80" font-family="system-ui, sans-serif" font-size="26" font-weight="bold" fill="#2C3E50" text-anchor="middle">🎯 결과</text>
    <text x="660" y="125" font-family="system-ui, sans-serif" font-size="22" fill="#34495E" text-anchor="middle">검색된 문서: 9개 (Q1: 3개 + Q2: 3개 + Q3: 3개) → 중복 제거 → 최종 5-7개</text>
    <text x="660" y="165" font-family="system-ui, sans-serif" font-size="22" fill="#7F8C8D" text-anchor="middle">훨씬 풍부한 컨텍스트로 LLM이 정확한 답변 생성 가능!</text>
  </g>

  <!-- Performance box -->
  <rect x="200" y="920" width="1520" height="100" rx="20" fill="#D5F4E6" stroke="#27AE60" stroke-width="2"/>
  <text x="270" y="965" font-size="40" text-anchor="middle">📈</text>
  <text x="380" y="960" font-family="system-ui, sans-serif" font-size="26" font-weight="bold" fill="#27AE60">성능 개선</text>
  <text x="380" y="995" font-family="system-ui, sans-serif" font-size="22" fill="#229954">Context Precision: 0.45 → 0.76 (+69%) | Context Recall: 0.51 → 0.78 (+53%)</text>

  <defs><marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#95A5A6"/></marker></defs>

  <text x="1850" y="1040" font-family="system-ui, sans-serif" font-size="24" fill="#BDC3C7" text-anchor="end">19 / 63</text>
</svg>
