{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# ğŸš€ 02: LangGraph ê³ ê¸‰ í†µí•© íŒ¨í„´\n",
    "\n",
    "## ğŸ“š í•™ìŠµ ëª©í‘œ\n",
    "01-langgraph-fundamentalsì—ì„œ ë°°ìš´ ëª¨ë“  íŒ¨í„´ì„ ì¡°í•©í•˜ì—¬ ì‹¤ë¬´ì—ì„œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.\n",
    "\n",
    "### ğŸ”— ì‚¬ì „ í•™ìŠµ í•„ìš”\n",
    "ì´ ë…¸íŠ¸ë¶ì„ ì‹œì‘í•˜ê¸° ì „ì— `01-langgraph-fundamentals.ipynb`ë¥¼ ë¨¼ì € ì™„ë£Œí•˜ì„¸ìš”:\n",
    "- âœ… Routing íŒ¨í„´: LLMì´ íŒë‹¨í•˜ëŠ” ì§€ëŠ¥ì  ë¼ìš°íŒ…\n",
    "- âœ… Fan-out/Fan-in íŒ¨í„´: ë³‘ë ¬ ì²˜ë¦¬ë¡œ íš¨ìœ¨ì„± ê·¹ëŒ€í™”  \n",
    "- âœ… Summarization íŒ¨í„´: ê¸´ ëŒ€í™”ë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ ìš”ì•½\n",
    "- âœ… Human in the Loop íŒ¨í„´: AI ì²˜ë¦¬ì— ì¸ê°„ ê²€í†  ì¶”ê°€\n",
    "\n",
    "## ğŸ† ì‹¤ë¬´ í†µí•© ì˜ˆì œ - ëª¨ë“  íŒ¨í„´ì˜ ì™„ë²½í•œ ì¡°í•©\n",
    "\n",
    "### ğŸ’¼ ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤: ì§€ëŠ¥í˜• ê³ ê° ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œ\n",
    "1. **ê³ ê° ì§ˆë¬¸ ë¶„ë¥˜** (Routing): \"ê¸°ìˆ  ë¬¸ì˜\", \"í™˜ë¶ˆ ìš”ì²­\", \"ì¼ë°˜ ìƒë‹´\" ë“±ìœ¼ë¡œ ìë™ ë¶„ë¥˜\n",
    "2. **ë³‘ë ¬ ì „ë¬¸ ì²˜ë¦¬** (Fan-out/Fan-in): ê° ë¶„ì•¼ë³„ ì „ë¬¸ íŒ€ì´ ë³‘ë ¬ë¡œ ì¡°ì‚¬ í›„ í†µí•©\n",
    "3. **ëŒ€í™” ê¸°ë¡ ê´€ë¦¬** (Summarization): ê¸´ ìƒë‹´ ë‚´ì—­ì„ ìë™ìœ¼ë¡œ ìš”ì•½í•´ì„œ íš¨ìœ¨ì  ê´€ë¦¬  \n",
    "4. **ìµœì¢… ìŠ¹ì¸ ê³¼ì •** (Human in the Loop): ì¤‘ìš”í•œ ì‘ë‹µì€ ì‹œë‹ˆì–´ ì§ì›ì´ ê²€í†  í›„ ìŠ¹ì¸\n",
    "\n",
    "### ğŸ”„ í†µí•© ì›Œí¬í”Œë¡œìš°\n",
    "**ì‚¬ìš©ì ì§ˆë¬¸** â†’ **ì§€ëŠ¥í˜• ë¶„ë¥˜** â†’ **ì „ë¬¸íŒ€ ë³‘ë ¬ ì¡°ì‚¬** â†’ **ê²°ê³¼ í†µí•©** â†’ **ì¸ê°„ ê²€í† ** â†’ **ìµœì¢… ì‘ë‹µ**\n",
    "\n",
    "### ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜\n",
    "- **íš¨ìœ¨ì„±**: ìë™ ë¶„ë¥˜ì™€ ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì²˜ë¦¬ ì‹œê°„ ë‹¨ì¶•\n",
    "- **í’ˆì§ˆ**: ê° ë¶„ì•¼ ì „ë¬¸ì„± + ì¸ê°„ ê²€í† ë¡œ ë†’ì€ í’ˆì§ˆ ë³´ì¥\n",
    "- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ë‚˜ ì „ë¬¸ ì˜ì—­ ì‰½ê²Œ ì¶”ê°€\n",
    "- **ì•ˆì „ì„±**: ì¤‘ìš”í•œ ê²°ì •ì—ëŠ” ë°˜ë“œì‹œ ì¸ê°„ ìŠ¹ì¸\n",
    "- **ì§€ì†ê°€ëŠ¥ì„±**: ëŒ€í™” ìš”ì•½ìœ¼ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ìœ ì§€"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸš€ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ë° EXAONE ëª¨ë¸ ë¡œë“œ\n",
    "!pip install -q langgraph langchain langchain-teddynote\n",
    "!pip install -q grandalf matplotlib networkx pyppeteer\n",
    "# ì‹œê°í™”ë¥¼ ìœ„í•œ ì¶”ê°€ íŒ¨í‚¤ì§€ë“¤\n",
    "!pip install -q graphviz pygraphviz\n",
    "!pip install -q pydot\n",
    "!pip install -q git+https://github.com/lgai-exaone/transformers@add-exaone4\n",
    "!pip install -q torch accelerate\n",
    "\n",
    "from typing import TypedDict, List, Dict, Any, Annotated\n",
    "from langgraph.graph import StateGraph, END, START\n",
    "from langgraph.graph.message import add_messages\n",
    "from langgraph.checkpoint.memory import MemorySaver\n",
    "from langgraph.types import interrupt, Command\n",
    "from langchain_core.messages import HumanMessage, AIMessage\n",
    "import json\n",
    "import random\n",
    "import time\n",
    "import torch\n",
    "import gc\n",
    "import re\n",
    "import uuid\n",
    "import operator\n",
    "from transformers import AutoTokenizer, AutoModelForCausalLM\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "# ì‹œê°í™” ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤\n",
    "try:\n",
    "    from langchain_teddynote.graphs import visualize_graph\n",
    "    print(\"âœ… langchain-teddynote ì‹œê°í™” ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ!\")\n",
    "except ImportError:\n",
    "    print(\"âš ï¸  langchain-teddynote ì‹œê°í™” ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨\")\n",
    "\n",
    "try:\n",
    "    from IPython.display import Image, display\n",
    "    print(\"âœ… IPython ë””ìŠ¤í”Œë ˆì´ ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ!\")\n",
    "except ImportError:\n",
    "    print(\"âš ï¸  IPython ë””ìŠ¤í”Œë ˆì´ ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨\")\n",
    "\n",
    "try:\n",
    "    import graphviz\n",
    "    print(\"âœ… graphviz ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ!\")\n",
    "except ImportError:\n",
    "    print(\"âš ï¸  graphviz ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨ - pip install graphviz í•„ìš”\")\n",
    "\n",
    "print(\"âœ… ë¼ì´ë¸ŒëŸ¬ë¦¬ import ì™„ë£Œ!\")\n",
    "\n",
    "# ğŸ¤– EXAONE ëª¨ë¸ ë¡œë“œ\n",
    "MODEL_NAME = \"LGAI-EXAONE/EXAONE-4.0-1.2B\"\n",
    "\n",
    "print(f\"ğŸš€ EXAONE-4.0-1.2B ëª¨ë¸ ë¡œë“œ ì‹œì‘: {MODEL_NAME}\")\n",
    "\n",
    "# EXAONE-4.0-1.2B ëª¨ë¸ ë° í† í¬ë‚˜ì´ì € ë¡œë“œ (CPU í˜¸í™˜)\n",
    "tokenizer = AutoTokenizer.from_pretrained(MODEL_NAME, trust_remote_code=True)\n",
    "model = AutoModelForCausalLM.from_pretrained(\n",
    "    MODEL_NAME,\n",
    "    torch_dtype=torch.float32,  # CPU í˜¸í™˜ì„ ìœ„í•´ float32 ì‚¬ìš©\n",
    "    trust_remote_code=True\n",
    ")\n",
    "\n",
    "print(\"âœ… EXAONE-4.0-1.2B ëª¨ë¸ ë¡œë“œ ì„±ê³µ!\")\n",
    "\n",
    "# GPU ë©”ëª¨ë¦¬ ìµœì í™”\n",
    "def clear_gpu_memory():\n",
    "    if torch.cuda.is_available():\n",
    "        torch.cuda.empty_cache()\n",
    "    gc.collect()\n",
    "\n",
    "def pure_exaone_inference(messages_or_prompt):\n",
    "    \"\"\"ğŸ”¥ EXAONE ëŒ€í™” ë§¥ë½ ì§€ì› í•¨ìˆ˜\"\"\"\n",
    "    clear_gpu_memory()\n",
    "    \n",
    "    try:\n",
    "        if isinstance(messages_or_prompt, str):\n",
    "            messages = [{\"role\": \"user\", \"content\": messages_or_prompt}]\n",
    "        else:\n",
    "            messages = messages_or_prompt\n",
    "        \n",
    "        input_ids = tokenizer.apply_chat_template(\n",
    "            messages,\n",
    "            tokenize=True,\n",
    "            add_generation_prompt=True,\n",
    "            return_tensors=\"pt\"\n",
    "        )\n",
    "        \n",
    "        with torch.no_grad():\n",
    "            outputs = model.generate(\n",
    "                input_ids,\n",
    "                max_new_tokens=100,\n",
    "                temperature=0.1,\n",
    "                do_sample=True,\n",
    "                top_p=0.9,\n",
    "                pad_token_id=tokenizer.pad_token_id or tokenizer.eos_token_id,\n",
    "                eos_token_id=tokenizer.eos_token_id\n",
    "            )\n",
    "        \n",
    "        generated_ids = outputs[0][input_ids.shape[-1]:]\n",
    "        ai_response = tokenizer.decode(generated_ids, skip_special_tokens=True).strip()\n",
    "        \n",
    "        clear_gpu_memory()\n",
    "        return ai_response if ai_response else \"ì•ˆë…•í•˜ì„¸ìš”!\"\n",
    "        \n",
    "    except Exception as e:\n",
    "        clear_gpu_memory()\n",
    "        print(f\"ğŸš¨ EXAONE ì¶”ë¡  ì˜¤ë¥˜: {e}\")\n",
    "        return \"ì£„ì†¡í•´ìš”, ë‹¤ì‹œ ë§ì”€í•´ ì£¼ì‹œê² ì–´ìš”?\"\n",
    "\n",
    "print(\"âœ… EXAONE ëª¨ë¸ ì„¤ì • ì™„ë£Œ!\")\n",
    "print(\"ğŸš€ ê³ ê¸‰ í†µí•© íŒ¨í„´ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ!\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 1. í†µí•© State ì •ì˜\n",
    "\n",
    "ëª¨ë“  íŒ¨í„´ì˜ ë°ì´í„°ë¥¼ í¬ê´„í•˜ëŠ” í†µí•© Stateë¥¼ ì •ì˜í•©ë‹ˆë‹¤."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸ† í†µí•© ê³ ê° ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œ State ì •ì˜ (ëª¨ë“  íŒ¨í„´ í†µí•©)\n",
    "class IntegratedCustomerServiceState(TypedDict):\n",
    "    # ê¸°ë³¸ ì •ë³´\n",
    "    customer_query: str                    # ê³ ê° ì§ˆë¬¸\n",
    "    conversation_history: Annotated[List[str], operator.add]  # ëŒ€í™” ê¸°ë¡\n",
    "    \n",
    "    # Routing íŒ¨í„´ ì •ë³´\n",
    "    query_category: str                    # ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬ (technical/policy/service)\n",
    "    routing_confidence: float              # ë¶„ë¥˜ ì‹ ë¢°ë„\n",
    "    \n",
    "    # Fan-out/Fan-in íŒ¨í„´ ì •ë³´  \n",
    "    technical_analysis: str                # ê¸°ìˆ íŒ€ ë¶„ì„ ê²°ê³¼\n",
    "    policy_guidance: str                   # ì •ì±…íŒ€ ë¶„ì„ ê²°ê³¼\n",
    "    service_recommendation: str            # ê³ ê°ì„œë¹„ìŠ¤íŒ€ ë¶„ì„ ê²°ê³¼\n",
    "    integrated_response: str               # í†µí•©ëœ ì‘ë‹µ\n",
    "    \n",
    "    # Summarization íŒ¨í„´ ì •ë³´\n",
    "    conversation_summary: str              # ëŒ€í™” ìš”ì•½\n",
    "    needs_summary: bool                    # ìš”ì•½ í•„ìš” ì—¬ë¶€\n",
    "    \n",
    "    # Human in the Loop íŒ¨í„´ ì •ë³´\n",
    "    requires_human_review: bool            # ì¸ê°„ ê²€í†  í•„ìš” ì—¬ë¶€\n",
    "    human_feedback: str                    # ì¸ê°„ ê²€í† ì í”¼ë“œë°±\n",
    "    approval_status: str                   # ìŠ¹ì¸ ìƒíƒœ\n",
    "    \n",
    "    # ìµœì¢… ê²°ê³¼\n",
    "    final_customer_response: str           # ìµœì¢… ê³ ê° ì‘ë‹µ\n",
    "\n",
    "print(\"ğŸ† í†µí•© ê³ ê° ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œ State ì •ì˜ ì™„ë£Œ!\")\n",
    "print(\"   ğŸ“Š ëª¨ë“  LangGraph íŒ¨í„´ì˜ ë°ì´í„°ë¥¼ í¬ê´„í•˜ëŠ” í†µí•© êµ¬ì¡°\")\n",
    "print(\"   ğŸ”„ Routing, Fan-out/Fan-in, Summarization, Human in the Loop ì§€ì›\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 2. Routing íŒ¨í„´ êµ¬í˜„\n",
    "\n",
    "ê³ ê° ì§ˆë¬¸ì„ ì§€ëŠ¥ì ìœ¼ë¡œ ë¶„ë¥˜í•˜ëŠ” ë¼ìš°íŒ… ì‹œìŠ¤í…œì„ êµ¬í˜„í•©ë‹ˆë‹¤."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸ§  Routing íŒ¨í„´ - ì§€ëŠ¥í˜• ê³ ê° ì§ˆë¬¸ ë¶„ë¥˜ (ìˆ˜ì •ë¨)\n",
    "\n",
    "def classify_customer_query(state: IntegratedCustomerServiceState) -> str:\n",
    "    \"\"\"ê³ ê° ì§ˆë¬¸ì„ ì§€ëŠ¥ì ìœ¼ë¡œ ë¶„ë¥˜í•˜ì—¬ ê²½ë¡œ ê²°ì •\"\"\"\n",
    "    query = state[\"customer_query\"]\n",
    "    \n",
    "    routing_prompt = f\"\"\"\n",
    "ë‹¤ìŒ ê³ ê° ì§ˆë¬¸ì„ ë¶„ì„í•´ì„œ ì ì ˆí•œ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜í•´ì£¼ì„¸ìš”:\n",
    "\n",
    "ê³ ê° ì§ˆë¬¸: {query}\n",
    "\n",
    "ì¹´í…Œê³ ë¦¬ ì˜µì…˜:\n",
    "1. \"technical\" - ê¸°ìˆ ì  ë¬¸ì œ, ì˜¤ë¥˜, ë²„ê·¸, ì„¤ì • ê´€ë ¨\n",
    "2. \"policy\" - í™˜ë¶ˆ, ì·¨ì†Œ, ì •ì±…, ê·œì • ê´€ë ¨\n",
    "3. \"service\" - ì¼ë°˜ ë¬¸ì˜, ì •ë³´ ìš”ì²­, ê³ ê° ì„œë¹„ìŠ¤ ê´€ë ¨\n",
    "\n",
    "ê°€ì¥ ì ì ˆí•œ ì¹´í…Œê³ ë¦¬ë¥¼ í•˜ë‚˜ë§Œ ì„ íƒí•´ì„œ ë‹µë³€í•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "    \n",
    "    llm_response = pure_exaone_inference(routing_prompt)\n",
    "    \n",
    "    # LLM ì‘ë‹µì—ì„œ ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ\n",
    "    if \"technical\" in llm_response.lower():\n",
    "        category = \"technical\"\n",
    "    elif \"policy\" in llm_response.lower():\n",
    "        category = \"policy\"\n",
    "    else:\n",
    "        category = \"service\"\n",
    "    \n",
    "    print(f\"ğŸ§  ë¼ìš°íŒ… ì™„ë£Œ: {query[:30]}... â†’ {category}\")\n",
    "    return category\n",
    "\n",
    "def routing_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ë¼ìš°íŒ… ê²°ê³¼ë¥¼ ìƒíƒœì— ì €ì¥í•˜ëŠ” ë…¸ë“œ\"\"\"\n",
    "    category = classify_customer_query(state)\n",
    "    \n",
    "    return {\n",
    "        \"query_category\": category,\n",
    "        \"routing_confidence\": 0.9,\n",
    "        \"requires_human_review\": category == \"policy\"  # ì •ì±… ê´€ë ¨ì€ ì¸ê°„ ê²€í†  í•„ìš”\n",
    "    }\n",
    "\n",
    "print(\"ğŸ§  Routing íŒ¨í„´ êµ¬í˜„ ì™„ë£Œ!\")\n",
    "print(\"   ğŸ¯ EXAONE ê¸°ë°˜ ì§€ëŠ¥í˜• ì§ˆë¬¸ ë¶„ë¥˜\")\n",
    "print(\"   ğŸ“‹ technical/policy/service 3ê°œ ì¹´í…Œê³ ë¦¬\")\n",
    "print(\"   ğŸ”§ classify_customer_query: ê²½ë¡œ ê²°ì • í•¨ìˆ˜\")\n",
    "print(\"   ğŸ“Š routing_node: ìƒíƒœ ì—…ë°ì´íŠ¸ ë…¸ë“œ\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 3. Fan-out/Fan-in íŒ¨í„´ êµ¬í˜„\n",
    "\n",
    "ì—¬ëŸ¬ ì „ë¬¸íŒ€ì´ ë³‘ë ¬ë¡œ ë¶„ì„í•˜ê³  ê²°ê³¼ë¥¼ í†µí•©í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í•©ë‹ˆë‹¤."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸ”„ Fan-out/Fan-in íŒ¨í„´ - ì „ë¬¸íŒ€ ë³‘ë ¬ ë¶„ì„\n",
    "\n",
    "def technical_team_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ê¸°ìˆ íŒ€ ì „ë¬¸ ë¶„ì„\"\"\"\n",
    "    query = state[\"customer_query\"]\n",
    "    category = state.get(\"query_category\", \"\")\n",
    "    \n",
    "    if category == \"technical\":\n",
    "        prompt = f\"\"\"\n",
    "ê¸°ìˆ íŒ€ ê´€ì ì—ì„œ ë‹¤ìŒ ê³ ê° ë¬¸ì˜ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”:\n",
    "\n",
    "ê³ ê° ì§ˆë¬¸: {query}\n",
    "\n",
    "ê¸°ìˆ ì  ê´€ì ì—ì„œ:\n",
    "- ë¬¸ì œ ì›ì¸ ë¶„ì„\n",
    "- í•´ê²° ë°©ë²• ì œì‹œ\n",
    "- ì˜ˆë°© ì¡°ì¹˜ ì•ˆë‚´\n",
    "\n",
    "ì „ë¬¸ì ì´ê³  ì •í™•í•œ ê¸°ìˆ  ì§€ì›ì„ ì œê³µí•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "    else:\n",
    "        prompt = f\"ê¸°ìˆ íŒ€ ê²€í† : {query} - ê¸°ìˆ ì  ì´ìŠˆ ì—†ìŒ\"\n",
    "    \n",
    "    technical_analysis = pure_exaone_inference(prompt)\n",
    "    print(f\"ğŸ”§ ê¸°ìˆ íŒ€ ë¶„ì„ ì™„ë£Œ\")\n",
    "    \n",
    "    return {\"technical_analysis\": technical_analysis}\n",
    "\n",
    "def policy_team_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ì •ì±…íŒ€ ì „ë¬¸ ë¶„ì„\"\"\"\n",
    "    query = state[\"customer_query\"]\n",
    "    category = state.get(\"query_category\", \"\")\n",
    "    \n",
    "    if category == \"policy\":\n",
    "        prompt = f\"\"\"\n",
    "ì •ì±…íŒ€ ê´€ì ì—ì„œ ë‹¤ìŒ ìš”ì²­ì„ ê²€í† í•´ì£¼ì„¸ìš”:\n",
    "\n",
    "ê³ ê° ìš”ì²­: {query}\n",
    "\n",
    "ì •ì±… ê²€í†  ì‚¬í•­:\n",
    "- ì •ì±… ì ìš© ê°€ëŠ¥ì„±\n",
    "- í•„ìš”í•œ ì ˆì°¨ì™€ ì„œë¥˜\n",
    "- ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„\n",
    "- ëŒ€ì•ˆ ì œì‹œ\n",
    "\n",
    "íšŒì‚¬ ì •ì±…ì— ë”°ë¥¸ ì •í™•í•œ ì•ˆë‚´ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "    else:\n",
    "        prompt = f\"ì •ì±…íŒ€ ê²€í† : {query} - íŠ¹ë³„í•œ ì •ì±… ì´ìŠˆ ì—†ìŒ\"\n",
    "    \n",
    "    policy_guidance = pure_exaone_inference(prompt)\n",
    "    print(f\"ğŸ“‹ ì •ì±…íŒ€ ë¶„ì„ ì™„ë£Œ\")\n",
    "    \n",
    "    return {\"policy_guidance\": policy_guidance}\n",
    "\n",
    "def service_team_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ê³ ê°ì„œë¹„ìŠ¤íŒ€ ì „ë¬¸ ë¶„ì„\"\"\"\n",
    "    query = state[\"customer_query\"]\n",
    "    \n",
    "    prompt = f\"\"\"\n",
    "ê³ ê°ì„œë¹„ìŠ¤íŒ€ ê´€ì ì—ì„œ ë‹¤ìŒ ê³ ê° ë¬¸ì˜ì— ëŒ€í•œ ì‘ë‹µì„ ì¤€ë¹„í•´ì£¼ì„¸ìš”:\n",
    "\n",
    "ê³ ê° ì§ˆë¬¸: {query}\n",
    "\n",
    "ê³ ê° ì„œë¹„ìŠ¤ ê´€ì ì—ì„œ:\n",
    "- ê³ ê° ê°ì •ê³¼ ë‹ˆì¦ˆ íŒŒì•…\n",
    "- ì¹œì ˆí•˜ê³  ê³µê°í•˜ëŠ” ì‘ë‹µ\n",
    "- ì¶”ê°€ ì§€ì› ë°©ì•ˆ\n",
    "- ê³ ê° ë§Œì¡±ë„ í–¥ìƒ ë°©ë²•\n",
    "\n",
    "ê³ ê° ì¤‘ì‹¬ì ì´ê³  ë”°ëœ»í•œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "    \n",
    "    service_recommendation = pure_exaone_inference(prompt)\n",
    "    print(f\"ğŸ’ ê³ ê°ì„œë¹„ìŠ¤íŒ€ ë¶„ì„ ì™„ë£Œ\")\n",
    "    \n",
    "    return {\"service_recommendation\": service_recommendation}\n",
    "\n",
    "def fan_in_aggregator_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"3ê°œ íŒ€ì˜ ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©\"\"\"\n",
    "    query = state[\"customer_query\"]\n",
    "    technical = state.get(\"technical_analysis\", \"\")\n",
    "    policy = state.get(\"policy_guidance\", \"\")\n",
    "    service = state.get(\"service_recommendation\", \"\")\n",
    "    \n",
    "    integration_prompt = f\"\"\"\n",
    "ë‹¤ìŒ ê³ ê° ì§ˆë¬¸ì— ëŒ€í•œ 3ê°œ ì „ë¬¸íŒ€ì˜ ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©í•´ì„œ ì™„ì „í•œ ì‘ë‹µì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”:\n",
    "\n",
    "ê³ ê° ì§ˆë¬¸: {query}\n",
    "\n",
    "ğŸ”§ ê¸°ìˆ íŒ€ ë¶„ì„:\n",
    "{technical}\n",
    "\n",
    "ğŸ“‹ ì •ì±…íŒ€ ë¶„ì„:\n",
    "{policy}\n",
    "\n",
    "ğŸ’ ê³ ê°ì„œë¹„ìŠ¤íŒ€ ë¶„ì„:\n",
    "{service}\n",
    "\n",
    "ìœ„ 3ê°œ íŒ€ì˜ ì „ë¬¸ ì˜ê²¬ì„ ì¢…í•©í•˜ì—¬:\n",
    "1. ê³ ê° ë¬¸ì˜ì— ëŒ€í•œ ì™„ì „í•œ í•´ë‹µ\n",
    "2. ë‹¨ê³„ë³„ í•´ê²° ë°©ì•ˆ\n",
    "3. ì¶”ê°€ ì§€ì› ì •ë³´\n",
    "4. ì¹œì ˆí•˜ê³  ì „ë¬¸ì ì¸ í†¤\n",
    "\n",
    "í†µí•©ëœ ê³ í’ˆì§ˆ ê³ ê° ì‘ë‹µì„ ì‘ì„±í•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "    \n",
    "    integrated_response = pure_exaone_inference(integration_prompt)\n",
    "    print(f\"ğŸ”— ì „ë¬¸íŒ€ ë¶„ì„ í†µí•© ì™„ë£Œ\")\n",
    "    \n",
    "    return {\"integrated_response\": integrated_response}\n",
    "\n",
    "print(\"ğŸ”„ Fan-out/Fan-in íŒ¨í„´ êµ¬í˜„ ì™„ë£Œ!\")\n",
    "print(\"   ğŸ”§ technical_team_node: ê¸°ìˆ ì  ë¬¸ì œ ì „ë¬¸ ë¶„ì„\")\n",
    "print(\"   ğŸ“‹ policy_team_node: ì •ì±… ë° ê·œì • ì „ë¬¸ ê²€í† \")\n",
    "print(\"   ğŸ’ service_team_node: ê³ ê° ì„œë¹„ìŠ¤ ê´€ì  ë¶„ì„\")\n",
    "print(\"   ğŸ”— fan_in_aggregator_node: ëª¨ë“  ë¶„ì„ ê²°ê³¼ í†µí•©\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 4. Summarization íŒ¨í„´ êµ¬í˜„\n",
    "\n",
    "ê¸´ ëŒ€í™” ê¸°ë¡ì„ ì§€ëŠ¥ì ìœ¼ë¡œ ìš”ì•½í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í•©ë‹ˆë‹¤."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸ“š Summarization íŒ¨í„´ - ëŒ€í™” ê¸°ë¡ ê´€ë¦¬\n",
    "\n",
    "def conversation_summarizer_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ëŒ€í™” ê¸°ë¡ì„ ìš”ì•½\"\"\"\n",
    "    history = state.get(\"conversation_history\", [])\n",
    "    query = state[\"customer_query\"]\n",
    "    integrated_response = state.get(\"integrated_response\", \"\")\n",
    "    \n",
    "    # í˜„ì¬ ëŒ€í™”ë¥¼ ê¸°ë¡ì— ì¶”ê°€\n",
    "    current_conversation = f\"ê³ ê°: {query}\\nAI ì‘ë‹µ: {integrated_response}\"\n",
    "    \n",
    "    if len(history) >= 3:  # 3ê°œ ì´ìƒì˜ ëŒ€í™”ê°€ ëˆ„ì ë˜ë©´ ìš”ì•½\n",
    "        # ê¸°ì¡´ ëŒ€í™” + í˜„ì¬ ëŒ€í™”ë¥¼ ëª¨ë‘ ìš”ì•½\n",
    "        all_conversation = \"\\n\\n\".join(history + [current_conversation])\n",
    "        \n",
    "        summary_prompt = f\"\"\"\n",
    "ë‹¤ìŒ ê³ ê° ì„œë¹„ìŠ¤ ëŒ€í™” ë‚´ìš©ì„ í•µì‹¬ë§Œ ê°„ë‹¨íˆ ìš”ì•½í•´ì£¼ì„¸ìš”:\n",
    "\n",
    "ëŒ€í™” ë‚´ìš©:\n",
    "{all_conversation}\n",
    "\n",
    "ìš”ì•½ í¬í•¨ ì‚¬í•­:\n",
    "- ê³ ê°ì˜ ì£¼ìš” ìš”ì²­ì‚¬í•­\n",
    "- ì œê³µëœ í•´ê²°ë°©ì•ˆ\n",
    "- í˜„ì¬ ì§„í–‰ ìƒí™©\n",
    "- ì¶”ê°€ í•„ìš”í•œ ì¡°ì¹˜\n",
    "\n",
    "ê°„ê²°í•˜ê³  ëª…í™•í•œ ìš”ì•½ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "        \n",
    "        summary = pure_exaone_inference(summary_prompt)\n",
    "        print(f\"ğŸ“š ëŒ€í™” ìš”ì•½ ì™„ë£Œ\")\n",
    "        \n",
    "        return {\n",
    "            \"conversation_summary\": summary,\n",
    "            \"conversation_history\": [f\"[ìš”ì•½] {summary}\", current_conversation],  # ìš”ì•½ + ìµœê·¼ ëŒ€í™”ë§Œ ìœ ì§€\n",
    "            \"needs_summary\": False\n",
    "        }\n",
    "    else:\n",
    "        print(f\"ğŸ“š ìš”ì•½ ë¶ˆí•„ìš” (ëŒ€í™” {len(history) + 1}í„´)\")\n",
    "        return {\n",
    "            \"conversation_summary\": \"ëŒ€í™” ì‹œì‘ ë‹¨ê³„\",\n",
    "            \"conversation_history\": [current_conversation],\n",
    "            \"needs_summary\": False\n",
    "        }\n",
    "\n",
    "print(\"ğŸ“š Summarization íŒ¨í„´ êµ¬í˜„ ì™„ë£Œ!\")\n",
    "print(\"   ğŸ“ ê¸´ ëŒ€í™” ìë™ ìš”ì•½ìœ¼ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ìœ ì§€\")\n",
    "print(\"   ğŸ¯ í•µì‹¬ ì •ë³´ ë³´ì¡´í•˜ë©´ì„œ í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 5. Human in the Loop íŒ¨í„´ êµ¬í˜„\n",
    "\n",
    "ì¤‘ìš”í•œ ê²°ì •ì— ì¸ê°„ì˜ ê²€í† ì™€ ìŠ¹ì¸ì„ ì¶”ê°€í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í•©ë‹ˆë‹¤."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸ‘¥ Human in the Loop íŒ¨í„´ - ìµœì¢… ìŠ¹ì¸ ê³¼ì • (ë™ì‘ ëª…í™•í™”)\n",
    "\n",
    "def human_review_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ì‹œë‹ˆì–´ ì§ì›ì˜ ê²€í†  ë° ìŠ¹ì¸\"\"\"\n",
    "    query = state[\"customer_query\"]\n",
    "    category = state.get(\"query_category\", \"\")\n",
    "    integrated_response = state.get(\"integrated_response\", \"\")\n",
    "    requires_review = state.get(\"requires_human_review\", False)\n",
    "    \n",
    "    print(f\"ğŸ‘¥ Human in the Loop ë‹¨ê³„:\")\n",
    "    print(f\"   ğŸ“‚ ì¹´í…Œê³ ë¦¬: {category}\")\n",
    "    print(f\"   ğŸ” ê²€í†  í•„ìš”: {requires_review}\")\n",
    "    \n",
    "    if requires_review:\n",
    "        print(f\"   ğŸ›‘ ì •ì±… ê´€ë ¨ ë¬¸ì˜ë¡œ ì‹œë‹ˆì–´ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤!\")\n",
    "        print(f\"   ğŸ“§ AI í†µí•© ì‘ë‹µ:\")\n",
    "        print(f\"   {integrated_response[:200]}...\")\n",
    "        \n",
    "        # ğŸ›‘ ì‹¤ì œ Human in the Loop - ì›Œí¬í”Œë¡œìš° ì¤‘ë‹¨!\n",
    "        feedback = interrupt({\n",
    "            \"message\": \"ğŸš¨ ì‹œë‹ˆì–´ ì§ì› ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤\",\n",
    "            \"reason\": f\"{category} ì¹´í…Œê³ ë¦¬ëŠ” ì¸ê°„ ìŠ¹ì¸ì´ í•„ìˆ˜ì…ë‹ˆë‹¤\",\n",
    "            \"customer_query\": query,\n",
    "            \"ai_response\": integrated_response,\n",
    "            \"instructions\": \"ì‘ë‹µì„ ê²€í† í•˜ê³  ìŠ¹ì¸/ìˆ˜ì • í”¼ë“œë°±ì„ ì£¼ì„¸ìš”. 'ìŠ¹ì¸' ë˜ëŠ” êµ¬ì²´ì ì¸ ìˆ˜ì • ìš”ì²­ì„ ì…ë ¥í•˜ì„¸ìš”.\"\n",
    "        })\n",
    "        \n",
    "        return {\n",
    "            \"human_feedback\": feedback,\n",
    "            \"approval_status\": \"reviewed\"\n",
    "        }\n",
    "    else:\n",
    "        print(f\"   âš¡ {category} ì¹´í…Œê³ ë¦¬ëŠ” ìë™ ìŠ¹ì¸ë©ë‹ˆë‹¤\")\n",
    "        return {\n",
    "            \"human_feedback\": \"ìë™ ìŠ¹ì¸\",\n",
    "            \"approval_status\": \"auto_approved\"\n",
    "        }\n",
    "\n",
    "def final_response_node(state: IntegratedCustomerServiceState) -> IntegratedCustomerServiceState:\n",
    "    \"\"\"ìµœì¢… ì‘ë‹µ í™•ì •\"\"\"\n",
    "    integrated_response = state.get(\"integrated_response\", \"\")\n",
    "    human_feedback = state.get(\"human_feedback\", \"\")\n",
    "    approval_status = state.get(\"approval_status\", \"auto_approved\")\n",
    "    \n",
    "    print(f\"âœ… ìµœì¢… ì‘ë‹µ ìƒì„±:\")\n",
    "    print(f\"   ğŸ“‹ ìŠ¹ì¸ ìƒíƒœ: {approval_status}\")\n",
    "    \n",
    "    if approval_status == \"reviewed\" and human_feedback:\n",
    "        if \"ìŠ¹ì¸\" in human_feedback:\n",
    "            final_response = integrated_response\n",
    "            print(\"   âœ… ì‹œë‹ˆì–´ ìŠ¹ì¸ ì™„ë£Œ - ì›ë³¸ ì‘ë‹µ ì‚¬ìš©\")\n",
    "        else:\n",
    "            # í”¼ë“œë°± ë°˜ì˜í•´ì„œ ìˆ˜ì •\n",
    "            revision_prompt = f\"\"\"\n",
    "ë‹¤ìŒ AI ì‘ë‹µì„ ì‹œë‹ˆì–´ ì§ì›ì˜ í”¼ë“œë°±ì— ë”°ë¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”:\n",
    "\n",
    "ì›ë³¸ ì‘ë‹µ: {integrated_response}\n",
    "ì‹œë‹ˆì–´ í”¼ë“œë°±: {human_feedback}\n",
    "\n",
    "í”¼ë“œë°±ì„ ë°˜ì˜í•œ ê°œì„ ëœ ìµœì¢… ì‘ë‹µì„ ì‘ì„±í•´ì£¼ì„¸ìš”.\n",
    "\"\"\"\n",
    "            final_response = pure_exaone_inference(revision_prompt)\n",
    "            print(\"   ğŸ”„ í”¼ë“œë°± ë°˜ì˜ ìˆ˜ì • ì™„ë£Œ\")\n",
    "    else:\n",
    "        final_response = integrated_response\n",
    "        print(\"   âš¡ ìë™ ìŠ¹ì¸ ì™„ë£Œ - ì›ë³¸ ì‘ë‹µ ì‚¬ìš©\")\n",
    "    \n",
    "    return {\"final_customer_response\": final_response}\n",
    "\n",
    "print(\"ğŸ‘¥ Human in the Loop íŒ¨í„´ êµ¬í˜„ ì™„ë£Œ!\")\n",
    "print(\"\")\n",
    "print(\"ğŸ¯ Human in the Loop ë™ì‘ ê·œì¹™:\")\n",
    "print(\"   ğŸ“‹ ì •ì±…(policy) ë¬¸ì˜ â†’ ğŸ›‘ interrupt() ë°œìƒ â†’ ì¸ê°„ ê²€í†  í•„ìˆ˜\")\n",
    "print(\"   ğŸ”§ ê¸°ìˆ (technical) ë¬¸ì˜ â†’ âš¡ ìë™ ìŠ¹ì¸ â†’ ë¹ ë¥¸ ì²˜ë¦¬\")\n",
    "print(\"   ğŸ’ ì„œë¹„ìŠ¤(service) ë¬¸ì˜ â†’ âš¡ ìë™ ìŠ¹ì¸ â†’ ë¹ ë¥¸ ì²˜ë¦¬\")\n",
    "print(\"\")\n",
    "print(\"ğŸ’¡ ì‹¤ì œ ìš´ì˜ ì‹œë‚˜ë¦¬ì˜¤:\")\n",
    "print(\"   1. ì •ì±… ë¬¸ì˜ ì‹œ ì›Œí¬í”Œë¡œìš°ê°€ ì¤‘ë‹¨ë˜ê³  __interrupt__ í‚¤ ë°˜í™˜\")\n",
    "print(\"   2. ì‹œë‹ˆì–´ê°€ ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ê²€í†  í›„ í”¼ë“œë°± ì…ë ¥\")\n",
    "print(\"   3. Command(resume=í”¼ë“œë°±)ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš° ì¬ì‹œì‘\")\n",
    "print(\"   4. í”¼ë“œë°±ì— ë”°ë¼ ì‘ë‹µ ìˆ˜ì • ë˜ëŠ” ì›ë³¸ ì‘ë‹µ ì‚¬ìš©\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 6. í†µí•© ì›Œí¬í”Œë¡œìš° êµ¬ì„±\n",
    "\n",
    "ì´ì œ ëª¨ë“  íŒ¨í„´ì„ í•˜ë‚˜ì˜ ì›Œí¬í”Œë¡œìš°ë¡œ ì—°ê²°í•˜ì—¬ ì™„ì „í•œ ê³ ê° ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# í†µí•© ì›Œí¬í”Œë¡œìš° ìƒì„± (ìˆ˜ì •ë¨: ì§„ì •í•œ Fan-out/Fan-in íŒ¨í„´)\n",
    "\n",
    "# StateGraph ìƒì„±\n",
    "workflow = StateGraph(IntegratedCustomerServiceState)\n",
    "\n",
    "# ëª¨ë“  ë…¸ë“œ ì¶”ê°€\n",
    "workflow.add_node(\"routing\", routing_node)  # ë¼ìš°íŒ… ë…¸ë“œë¡œ ë³€ê²½\n",
    "workflow.add_node(\"technical_team\", technical_team_node)\n",
    "workflow.add_node(\"policy_team\", policy_team_node)\n",
    "workflow.add_node(\"service_team\", service_team_node)\n",
    "workflow.add_node(\"fan_in_aggregator\", fan_in_aggregator_node)\n",
    "workflow.add_node(\"conversation_summarizer\", conversation_summarizer_node)\n",
    "workflow.add_node(\"human_review\", human_review_node)\n",
    "workflow.add_node(\"final_response\", final_response_node)\n",
    "\n",
    "# ğŸ”„ ì§„ì •í•œ Fan-out/Fan-in ì›Œí¬í”Œë¡œìš° êµ¬ì„±\n",
    "workflow.add_edge(START, \"routing\")\n",
    "\n",
    "# ğŸŒŸ Fan-out: ë¼ìš°íŒ… í›„ ëª¨ë“  íŒ€ì´ ë³‘ë ¬ë¡œ ë¶„ì„ ìˆ˜í–‰\n",
    "workflow.add_edge(\"routing\", \"technical_team\")\n",
    "workflow.add_edge(\"routing\", \"policy_team\") \n",
    "workflow.add_edge(\"routing\", \"service_team\")\n",
    "\n",
    "# ğŸ”„ Fan-in: ëª¨ë“  íŒ€ì˜ ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©\n",
    "workflow.add_edge(\"technical_team\", \"fan_in_aggregator\")\n",
    "workflow.add_edge(\"policy_team\", \"fan_in_aggregator\")\n",
    "workflow.add_edge(\"service_team\", \"fan_in_aggregator\")\n",
    "\n",
    "# ìˆœì°¨ ì²˜ë¦¬: í†µí•© â†’ ìš”ì•½ â†’ íœ´ë¨¼ ë¦¬ë·° â†’ ìµœì¢… ì‘ë‹µ\n",
    "workflow.add_edge(\"fan_in_aggregator\", \"conversation_summarizer\")\n",
    "workflow.add_edge(\"conversation_summarizer\", \"human_review\")\n",
    "workflow.add_edge(\"human_review\", \"final_response\")\n",
    "workflow.add_edge(\"final_response\", END)\n",
    "\n",
    "# ì²´í¬í¬ì¸í„°ì™€ í•¨ê»˜ ì»´íŒŒì¼\n",
    "checkpointer = MemorySaver()\n",
    "integrated_app = workflow.compile(checkpointer=checkpointer)\n",
    "\n",
    "print(\"âœ… ì§„ì •í•œ Fan-out/Fan-in í†µí•© ì›Œí¬í”Œë¡œìš° ì™„ì„±!\")\n",
    "print(\"ğŸ”„ ìˆ˜ì •ëœ ì›Œí¬í”Œë¡œìš° êµ¬ì¡°:\")\n",
    "print(\"   START â†’ ë¼ìš°íŒ… â†’ [ëª¨ë“ íŒ€ ë³‘ë ¬ë¶„ì„] â†’ í†µí•© â†’ ìš”ì•½ â†’ íœ´ë¨¼ë¦¬ë·° â†’ ìµœì¢…ì‘ë‹µ â†’ END\")\n",
    "print(\"\")\n",
    "print(\"ğŸŒŸ ì£¼ìš” ê°œì„ ì‚¬í•­:\")\n",
    "print(\"   âœ… ë¼ìš°íŒ… í›„ ëª¨ë“  íŒ€ì´ ë³‘ë ¬ë¡œ ë¶„ì„ (ì§„ì •í•œ Fan-out)\")\n",
    "print(\"   âœ… ê° íŒ€ì´ ì¹´í…Œê³ ë¦¬ì— ê´€ê³„ì—†ì´ ìì‹ ì˜ ê´€ì ì—ì„œ ë¶„ì„\")\n",
    "print(\"   âœ… Fan-inì—ì„œ ëª¨ë“  ë¶„ì„ ê²°ê³¼ë¥¼ ì¢…í•©í•˜ì—¬ ê³ í’ˆì§ˆ ì‘ë‹µ ìƒì„±\")\n",
    "print(\"   âœ… íƒ€ì… ì•ˆì „ì„± í™•ë³´ ë° ëª…í™•í•œ ì—­í•  ë¶„ë¦¬\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ğŸ“Š ì›Œí¬í”Œë¡œìš° ì‹œê°í™” (ìˆ˜ì •ë¨ - ì—¬ëŸ¬ ë°©ë²• ì‹œë„)\n",
    "print(\"ğŸ“Š í†µí•© ì›Œí¬í”Œë¡œìš° ì‹œê°í™”\")\n",
    "print(\"=\" * 50)\n",
    "from langchain_teddynote.graphs import visualize_graph\n",
    "visualize_graph(integrated_app)\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": "# í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ìˆ  ë¬¸ì˜ (ìë™ ìŠ¹ì¸ ë°ëª¨) - ê°œì„ ë¨\nprint(\"=== í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ìˆ  ë¬¸ì˜ ===\")\nprint(\"\")\nprint(\"ğŸ¯ ì´ ì‹œë‚˜ë¦¬ì˜¤ì˜ ëª©ì :\")\nprint(\"   âœ… ë¼ìš°íŒ… íŒ¨í„´: 'í¬ë˜ì‹œ' í‚¤ì›Œë“œë¡œ 'technical' ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜\")\nprint(\"   âœ… Fan-out/Fan-in: ëª¨ë“  íŒ€ì´ ë³‘ë ¬ ë¶„ì„ í›„ í†µí•©\")\nprint(\"   âœ… ìš”ì•½ íŒ¨í„´: ëŒ€í™” ê¸°ë¡ ê´€ë¦¬\")\nprint(\"   âœ… Human in Loop: ê¸°ìˆ  ë¬¸ì˜ëŠ” ìë™ ìŠ¹ì¸ (interrupt ì—†ìŒ)\")\nprint(\"\")\nprint(\"ğŸ“‹ ì˜ˆìƒ ì‹¤í–‰ íë¦„:\")\nprint(\"   1. ë¼ìš°íŒ… â†’ 'technical' ë¶„ë¥˜\")\nprint(\"   2. ëª¨ë“  íŒ€ ë³‘ë ¬ ë¶„ì„ (ê¸°ìˆ íŒ€ ìƒì„¸, ë‹¤ë¥¸ íŒ€ ê°„ëµ)\")\nprint(\"   3. ê²°ê³¼ í†µí•© â†’ ê¸°ìˆ ì  í•´ê²°ì±… ì¤‘ì‹¬ì˜ ì‘ë‹µ ìƒì„±\")\nprint(\"   4. ëŒ€í™” ìš”ì•½ â†’ ì²« ë²ˆì§¸ ëŒ€í™”ë¡œ ìš”ì•½ ë¶ˆí•„ìš”\")\nprint(\"   5. Human Review â†’ ìë™ ìŠ¹ì¸ (requires_human_review=False)\")\nprint(\"   6. ìµœì¢… ì‘ë‹µ â†’ ê³ ê°ì—ê²Œ ì™„ì„±ëœ ê¸°ìˆ  ì§€ì› ì œê³µ\")\nprint(\"\")\n\ninitial_state = IntegratedCustomerServiceState(\n    customer_query=\"ì•±ì´ ìê¾¸ í¬ë˜ì‹œê°€ ë‚˜ëŠ”ë° ì–´ë–»ê²Œ í•´ê²°í•˜ë‚˜ìš”?\",\n    conversation_history=[],\n    query_category=\"\",\n    routing_confidence=0.0,\n    technical_analysis=\"\",\n    policy_guidance=\"\", \n    service_recommendation=\"\",\n    integrated_response=\"\",\n    conversation_summary=\"\",\n    needs_summary=False,\n    requires_human_review=False,\n    human_feedback=\"\",\n    approval_status=\"\",\n    final_customer_response=\"\"\n)\n\n# ì›Œí¬í”Œë¡œìš° ì‹¤í–‰\nconfig = {\"configurable\": {\"thread_id\": \"test_technical_1\"}}\n\nprint(\"ğŸš€ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘...\")\ntry:\n    result = integrated_app.invoke(initial_state, config)\n    \n    print(\"\")\n    print(\"ğŸ“‹ ì‹¤í–‰ ê²°ê³¼:\")\n    print(f\"   ğŸ“‚ ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬: {result['query_category']}\")\n    print(f\"   ğŸ”§ ê¸°ìˆ íŒ€ ë¶„ì„: {result['technical_analysis'][:80]}...\")\n    print(f\"   ğŸ“‹ ì •ì±…íŒ€ ê²€í† : {result['policy_guidance'][:60]}...\")\n    print(f\"   ğŸ’ ì„œë¹„ìŠ¤íŒ€ ë¶„ì„: {result['service_recommendation'][:60]}...\")\n    print(f\"   ğŸ“ ëŒ€í™” ìš”ì•½: {result['conversation_summary']}\")\n    print(f\"   ğŸ‘¥ ì¸ê°„ ê²€í† : {result['human_feedback']}\")\n    print(f\"   ğŸ“‹ ìŠ¹ì¸ ìƒíƒœ: {result.get('approval_status', 'Unknown')}\")\n    print(f\"   ğŸ’¬ ìµœì¢… ì‘ë‹µ: {result['final_customer_response'][:100]}...\")\n    \n    # ì•ˆì „í•œ ì¸í„°ëŸ½íŠ¸ ì²´í¬\n    if \"__interrupt__\" in result:\n        print(\"\")\n        print(\"âŒ ì˜ˆìƒê³¼ ë‹¤ë¦„: interruptê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!\")\n        print(\"ğŸ” ê¸°ìˆ  ë¬¸ì˜ì¸ë° ì¸ê°„ ê²€í† ê°€ íŠ¸ë¦¬ê±°ë˜ì—ˆìŠµë‹ˆë‹¤\")\n        \n        # ì¸í„°ëŸ½íŠ¸ ë°ì´í„° ì•ˆì „í•˜ê²Œ ì¶œë ¥\n        try:\n            interrupt_info = result[\"__interrupt__\"]\n            print(f\"ğŸ¯ ì¸í„°ëŸ½íŠ¸ ë°ì´í„° íƒ€ì…: {type(interrupt_info)}\")\n            print(f\"ğŸ¯ ì¸í„°ëŸ½íŠ¸ ë‚´ìš©: {str(interrupt_info)[:100]}...\")\n        except Exception as int_err:\n            print(f\"âš ï¸ ì¸í„°ëŸ½íŠ¸ ë°ì´í„° ì²˜ë¦¬ ì˜¤ë¥˜: {int_err}\")\n    else:\n        print(\"\")\n        print(\"âœ… ì˜ˆìƒëŒ€ë¡œ ì‘ë™: ê¸°ìˆ  ë¬¸ì˜ëŠ” ìë™ ìŠ¹ì¸ìœ¼ë¡œ ì™„ë£Œ!\")\n        print(\"ğŸ¯ Human in the Loopê°€ ì˜¬ë°”ë¥´ê²Œ ìš°íšŒë˜ì—ˆìŠµë‹ˆë‹¤\")\n        \n    # ì¶”ê°€ ê²€ì¦\n    print(\"\")\n    print(\"ğŸ” ìƒì„¸ ê²€ì¦:\")\n    print(f\"   ğŸ“‹ requires_human_review: {result.get('requires_human_review', 'Not Set')}\")\n    if result.get('requires_human_review') == False:\n        print(\"   âœ… ê¸°ìˆ  ë¬¸ì˜ëŠ” ì˜¬ë°”ë¥´ê²Œ ìë™ ìŠ¹ì¸ ê²½ë¡œë¡œ ì²˜ë¦¬ë¨\")\n    else:\n        print(\"   âš ï¸ ì˜ˆìƒê³¼ ë‹¤ë¥¸ human_review ì„¤ì •\")\n        \nexcept Exception as e:\n    print(f\"âŒ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì˜¤ë¥˜: {e}\")\n    print(\"ğŸ” ë””ë²„ê¹… ì •ë³´:\")\n    print(f\"   ğŸ“‹ ì˜¤ë¥˜ íƒ€ì…: {type(e).__name__}\")\n    print(f\"   ğŸ“‹ ì˜¤ë¥˜ ë©”ì‹œì§€: {str(e)}\")\n    \nprint(\"\\n\" + \"=\"*60)"
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": "# í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ 2: ì •ì±… ë¬¸ì˜ (Human in the Loop í™œì„±í™” ë°ëª¨) - ìˆ˜ì •ë¨\nprint(\"=== í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ 2: ì •ì±… ë¬¸ì˜ ===\")\nprint(\"\")\nprint(\"ğŸ¯ ì´ ì‹œë‚˜ë¦¬ì˜¤ì˜ ëª©ì :\")\nprint(\"   âœ… ë¼ìš°íŒ… íŒ¨í„´: 'í™˜ë¶ˆ' í‚¤ì›Œë“œë¡œ 'policy' ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜\")\nprint(\"   âœ… Fan-out/Fan-in: ëª¨ë“  íŒ€ì´ ë³‘ë ¬ ë¶„ì„ (ì •ì±…íŒ€ ìƒì„¸)\")\nprint(\"   âœ… ìš”ì•½ íŒ¨í„´: ê¸°ì¡´ ëŒ€í™” ê¸°ë¡ê³¼ í•¨ê»˜ ìš”ì•½\")\nprint(\"   âœ… Human in Loop: ì •ì±… ë¬¸ì˜ëŠ” interrupt() ë°œìƒ â†’ ì¸ê°„ ê²€í†  í•„ìˆ˜!\")\nprint(\"\")\nprint(\"ğŸ“‹ ì˜ˆìƒ ì‹¤í–‰ íë¦„:\")\nprint(\"   1. ë¼ìš°íŒ… â†’ 'policy' ë¶„ë¥˜\")\nprint(\"   2. ëª¨ë“  íŒ€ ë³‘ë ¬ ë¶„ì„ (ì •ì±…íŒ€ ìƒì„¸, ë‹¤ë¥¸ íŒ€ ì§€ì›)\")\nprint(\"   3. ê²°ê³¼ í†µí•© â†’ ì •ì±… ê°€ì´ë“œë¼ì¸ ì¤‘ì‹¬ì˜ ì‘ë‹µ ìƒì„±\")\nprint(\"   4. ëŒ€í™” ìš”ì•½ â†’ ê¸°ì¡´ ëŒ€í™”ì™€ í†µí•©í•˜ì—¬ ìš”ì•½\")\nprint(\"   5. Human Review â†’ interrupt() ë°œìƒ! (__interrupt__ í‚¤ ë°˜í™˜)\")\nprint(\"   6. ì›Œí¬í”Œë¡œìš° ì¤‘ë‹¨ â†’ ì‹œë‹ˆì–´ ê²€í†  ëŒ€ê¸°\")\nprint(\"\")\n\npolicy_state = IntegratedCustomerServiceState(\n    customer_query=\"í™˜ë¶ˆ ì •ì±…ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”? êµ¬ë§¤í•œì§€ 15ì¼ ëëŠ”ë° í™˜ë¶ˆ ê°€ëŠ¥í•œê°€ìš”?\",\n    conversation_history=[\"ì´ì „ì— ë¹„ìŠ·í•œ ë¬¸ì˜ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\"],\n    query_category=\"\",\n    routing_confidence=0.0,\n    technical_analysis=\"\",\n    policy_guidance=\"\", \n    service_recommendation=\"\",\n    integrated_response=\"\",\n    conversation_summary=\"\",\n    needs_summary=False,\n    requires_human_review=False,\n    human_feedback=\"\",\n    approval_status=\"\",\n    final_customer_response=\"\"\n)\n\nconfig2 = {\"configurable\": {\"thread_id\": \"test_policy_1\"}}\n\nprint(\"ğŸš€ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘...\")\ntry:\n    result2 = integrated_app.invoke(policy_state, config2)\n    \n    print(\"\")\n    print(\"ğŸ“‹ ì‹¤í–‰ ê²°ê³¼:\")\n    print(f\"   ğŸ“‚ ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬: {result2['query_category']}\")\n    print(f\"   ğŸ“‹ ì •ì±…íŒ€ ê°€ì´ë˜ìŠ¤: {result2['policy_guidance'][:80]}...\")\n    print(f\"   ğŸ“ ëŒ€í™” ìš”ì•½: {result2['conversation_summary']}\")\n    \n    if \"__interrupt__\" in result2:\n        print(\"\")\n        print(\"âœ… ì˜ˆìƒëŒ€ë¡œ ì‘ë™: interruptê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!\")\n        print(\"ğŸ›‘ ì •ì±… ê´€ë ¨ ë¬¸ì˜ë¡œ ì‹œë‹ˆì–´ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤\")\n        \n        # ğŸ”§ ì•ˆì „í•œ ì¸í„°ëŸ½íŠ¸ ë°ì´í„° ì²˜ë¦¬\n        print(\"ğŸ“‹ ì¸í„°ëŸ½íŠ¸ ìƒì„¸ ì •ë³´:\")\n        try:\n            interrupt_data = result2[\"__interrupt__\"]\n            \n            # ë°ì´í„° íƒ€ì…ë³„ ì²˜ë¦¬\n            if isinstance(interrupt_data, dict):\n                print(\"   ğŸ“Š ì¸í„°ëŸ½íŠ¸ ë°ì´í„° íƒ€ì…: ë”•ì…”ë„ˆë¦¬\")\n                for key, value in interrupt_data.items():\n                    if key == \"ai_response\":\n                        print(f\"   {key}: {str(value)[:100]}...\")\n                    else:\n                        print(f\"   {key}: {value}\")\n                        \n            elif isinstance(interrupt_data, list):\n                print(\"   ğŸ“Š ì¸í„°ëŸ½íŠ¸ ë°ì´í„° íƒ€ì…: ë¦¬ìŠ¤íŠ¸\")\n                for i, item in enumerate(interrupt_data):\n                    print(f\"   ì¸í„°ëŸ½íŠ¸ {i+1}: {str(item)[:100]}...\")\n                    \n            else:\n                print(\"   ğŸ“Š ì¸í„°ëŸ½íŠ¸ ë°ì´í„° íƒ€ì…: ê¸°íƒ€\")\n                print(f\"   ì „ì²´ ë°ì´í„°: {str(interrupt_data)[:200]}...\")\n                \n        except Exception as e:\n            print(f\"   âš ï¸ ì¸í„°ëŸ½íŠ¸ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜: {e}\")\n            print(f\"   ğŸ” ì›ë³¸ ë°ì´í„° íƒ€ì…: {type(result2.get('__interrupt__', 'Not Found'))}\")\n            print(f\"   ğŸ” ì›ë³¸ ë°ì´í„°: {str(result2.get('__interrupt__', 'Not Found'))[:100]}...\")\n        \n        print(\"\")\n        print(\"ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„ (ì‹¤ì œ ìš´ì˜ ì‹œ):\")\n        print(\"   1. ì‹œë‹ˆì–´ê°€ ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ AI ì‘ë‹µ ê²€í† \")\n        print(\"   2. ìŠ¹ì¸ ë˜ëŠ” ìˆ˜ì • ìš”ì²­ ì…ë ¥\")\n        print(\"   3. Command(resume='í”¼ë“œë°±')ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš° ì¬ì‹œì‘\")\n        \n        # ì‹œë®¬ë ˆì´ì…˜: ì‹œë‹ˆì–´ ìŠ¹ì¸ í›„ ì¬ì‹œì‘\n        print(\"\")\n        print(\"ğŸ­ ì‹œë‹ˆì–´ ìŠ¹ì¸ ì‹œë®¬ë ˆì´ì…˜...\")\n        try:\n            resume_result2 = integrated_app.invoke(\n                Command(resume=\"ì •ì±…ì— ë”°ë¼ 15ì¼ ì´ë‚´ì´ë¯€ë¡œ í™˜ë¶ˆ ìŠ¹ì¸í•©ë‹ˆë‹¤.\"), \n                config2\n            )\n            print(\"âœ… ì›Œí¬í”Œë¡œìš° ì¬ì‹œì‘ ì™„ë£Œ!\")\n            print(f\"ğŸ’¬ ìµœì¢… ê³ ê° ì‘ë‹µ: {resume_result2['final_customer_response'][:150]}...\")\n        except Exception as resume_error:\n            print(f\"âš ï¸ ì›Œí¬í”Œë¡œìš° ì¬ì‹œì‘ ì˜¤ë¥˜: {resume_error}\")\n        \n    else:\n        print(\"\")\n        print(\"âŒ ì˜ˆìƒê³¼ ë‹¤ë¦„: interruptê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!\")\n        print(\"ğŸ” ì •ì±… ë¬¸ì˜ì¸ë° ìë™ ìŠ¹ì¸ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤\")\n        print(f\"   ğŸ“‹ requires_human_review: {result2.get('requires_human_review', 'Unknown')}\")\n        print(f\"   ğŸ“‹ approval_status: {result2.get('approval_status', 'Unknown')}\")\n        print(f\"ğŸ’¬ ìµœì¢… ì‘ë‹µ: {result2['final_customer_response'][:150]}...\")\n        \nexcept Exception as e:\n    print(f\"âŒ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì˜¤ë¥˜: {e}\")\n    print(\"ğŸ” ë””ë²„ê¹… ì •ë³´:\")\n    print(f\"   ğŸ“‹ ì˜¤ë¥˜ íƒ€ì…: {type(e).__name__}\")\n    print(f\"   ğŸ“‹ ì˜¤ë¥˜ ë©”ì‹œì§€: {str(e)}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"\")\nprint(\"ğŸ“ í•™ìŠµ í¬ì¸íŠ¸:\")\nprint(\"   ğŸ“Œ ê¸°ìˆ  ë¬¸ì˜ = ìë™ ìŠ¹ì¸ = ë¹ ë¥¸ ì²˜ë¦¬\")\nprint(\"   ğŸ“Œ ì •ì±… ë¬¸ì˜ = ì¸ê°„ ê²€í†  = ì‹ ì¤‘í•œ ì²˜ë¦¬\")\nprint(\"   ğŸ“Œ interrupt()ëŠ” ì‹¤ì œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì¤‘ë‹¨ì‹œí‚¤ëŠ” ê°•ë ¥í•œ ë„êµ¬\")\nprint(\"   ğŸ“Œ Command(resume)ìœ¼ë¡œ ì¤‘ë‹¨ëœ ì›Œí¬í”Œë¡œìš°ë¥¼ ì¬ì‹œì‘í•  ìˆ˜ ìˆìŒ\")\nprint(\"   ğŸ“Œ ì¸í„°ëŸ½íŠ¸ ë°ì´í„° êµ¬ì¡°ëŠ” í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ\")"
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 8. ê²°ë¡  ë° í•™ìŠµ í¬ì¸íŠ¸\n",
    "\n",
    "## ğŸ¯ ì´ë²ˆ ì‹¤ìŠµì—ì„œ ë°°ìš´ ê²ƒë“¤\n",
    "\n",
    "### íŒ¨í„´ í†µí•©ì˜ í˜\n",
    "- **ë¼ìš°íŒ… íŒ¨í„´**: ì ì ˆí•œ ì „ë¬¸ê°€ì—ê²Œ ë¬¸ì˜ë¥¼ ìë™ ë¶„ë°°\n",
    "- **Fan-out/Fan-in íŒ¨í„´**: ì—¬ëŸ¬ ê´€ì ì—ì„œ ë™ì‹œì— ë¬¸ì œë¥¼ ë¶„ì„í•˜ê³  í†µí•©\n",
    "- **ìš”ì•½ íŒ¨í„´**: ê¸´ ëŒ€í™”ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬\n",
    "- **Human in the Loop**: ì¤‘ìš”í•œ ê²°ì •ì—ì„œ ì¸ê°„ì˜ íŒë‹¨ë ¥ í™œìš©\n",
    "\n",
    "### ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ì ìš©\n",
    "ì´ í†µí•© ì‹œìŠ¤í…œì€ ë‹¤ìŒê³¼ ê°™ì€ ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n",
    "- ğŸ§ **ê³ ê° ì„œë¹„ìŠ¤ ì„¼í„°**: ë¬¸ì˜ë¥¼ ìë™ìœ¼ë¡œ ë¶„ë¥˜í•˜ê³  ì „ë¬¸ê°€ ê²€í†  í›„ ì‘ë‹µ\n",
    "- ğŸ¥ **ì˜ë£Œ ìƒë‹´**: ì¦ìƒì„ ë¶„ì„í•˜ê³  ì˜ì‚¬ì˜ ìµœì¢… ê²€í†  í›„ ê¶Œê³ ì‚¬í•­ ì œê³µ\n",
    "- ğŸ’¼ **ë²•ë¥  ìë¬¸**: ë²•ì  ë¬¸ì œë¥¼ ë¶„ì„í•˜ê³  ë³€í˜¸ì‚¬ì˜ ê²€í†  í›„ ì¡°ì–¸ ì œê³µ\n",
    "- ğŸ­ **ì œí’ˆ ì§€ì›**: ê¸°ìˆ  ë¬¸ì œë¥¼ ìë™ ë¶„ë¥˜í•˜ê³  ì „ë¬¸ê°€ ìŠ¹ì¸ í›„ í•´ê²°ì±… ì œê³µ\n",
    "\n",
    "### ë‹¤ìŒ ë‹¨ê³„\n",
    "- ë” ë³µì¡í•œ ì¡°ê±´ë¶€ ë¼ìš°íŒ… êµ¬í˜„\n",
    "- ì‹¤ì‹œê°„ í”¼ë“œë°± ë£¨í”„ ì¶”ê°€\n",
    "- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”\n",
    "- ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ì™€ì˜ í†µí•©\n",
    "- ë©€í‹°ëª¨ë‹¬ ì…ë ¥ (í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, ìŒì„±) ì§€ì›\n",
    "\n",
    "## ğŸ’¡ í•µì‹¬ ì¸ì‚¬ì´íŠ¸\n",
    "ê°ê°ì˜ LangGraph íŒ¨í„´ì€ ê°•ë ¥í•˜ì§€ë§Œ, ì´ë“¤ì„ ì¡°í•©í–ˆì„ ë•Œ ì§„ì •í•œ ê°€ì¹˜ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œëŠ” ë‹¨ì¼ íŒ¨í„´ìœ¼ë¡œ í•´ê²°ë˜ì§€ ì•Šìœ¼ë©°, ì´ëŸ° í†µí•© ì ‘ê·¼ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.\n",
    "\n",
    "## ğŸš€ ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ\n",
    "1. **ë‹¨ê³„ì  ì ‘ê·¼**: í•œ ë²ˆì— ëª¨ë“  íŒ¨í„´ì„ êµ¬í˜„í•˜ì§€ ë§ê³  ì ì§„ì ìœ¼ë¡œ ì¶”ê°€\n",
    "2. **ë¹„ì¦ˆë‹ˆìŠ¤ ìš°ì„ ìˆœìœ„**: ê°€ì¥ ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œë¶€í„° í•´ê²°\n",
    "3. **ì‚¬ìš©ì í”¼ë“œë°±**: ì‹¤ì œ ì‚¬ìš©ìì˜ í”¼ë“œë°±ì„ í†µí•œ ì§€ì†ì  ê°œì„ \n",
    "4. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: ê° íŒ¨í„´ì˜ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ìµœì í™”\n",
    "5. **í™•ì¥ì„± ê³ ë ¤**: ë¯¸ë˜ì˜ ìš”êµ¬ì‚¬í•­ ë³€í™”ì— ëŒ€ë¹„í•œ ìœ ì—°í•œ ì„¤ê³„\n",
    "\n",
    "ğŸ‰ **ì¶•í•˜í•©ë‹ˆë‹¤! ì´ì œ LangGraphì˜ ëª¨ë“  í•µì‹¬ íŒ¨í„´ì„ ë§ˆìŠ¤í„°í•˜ê³  ì‹¤ë¬´ê¸‰ í†µí•© ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}